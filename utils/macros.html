{%- macro recursive_categories(categories) -%}
    {%- for category in categories -%}
    <a href="{{ category.link }}" target="_blank">{{ category.name }}</a>
        {%- if category.sub == 'foo' -%}
            <div class="sub-cat">
                <p>TEST</p>
                {{ recursive_categories(category.sub) }}
            </div>
        {%- endif -%}
    {%- endfor -%}
{%- endmacro -%}